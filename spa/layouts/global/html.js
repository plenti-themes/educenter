import{SvelteComponent,add_flush_callback,append_hydration,assign,attr,bind,binding_callbacks,check_outros,children,claim_component,claim_element,claim_space,construct_svelte_component,create_component,destroy_component,detach,element,empty,get_spread_object,get_spread_update,group_outros,init,insert_hydration,mount_component,noop,safe_not_equal,space,subscribe,transition_in,transition_out}from"../../web_modules/svelte/internal/index.mjs";import{onMount}from"../../web_modules/svelte/index.mjs";import Head from"./head.js";import Nav from"./nav.js";import Header from"./header.js";import Footer from"./footer.js";import Newsletter from"./newsletter.js";import{makeTitle}from"../scripts/make_title.js";import Login from"./login.js";function create_if_block(e){let t,a,i,s,o;function r(t){e[9](t)}function c(t){e[10](t)}var n=e[8].menu;function l(e){let t={user:e[6]};return e[0]!==void 0&&(t.content=e[0]),e[1]!==void 0&&(t.shadowContent=e[1]),{props:t}}return n&&(t=construct_svelte_component(n,l(e)),binding_callbacks.push(()=>bind(t,"content",r)),binding_callbacks.push(()=>bind(t,"shadowContent",c))),{c(){t&&create_component(t.$$.fragment),s=empty()},l(e){t&&claim_component(t.$$.fragment,e),s=empty()},m(e,n){t&&mount_component(t,e,n),insert_hydration(e,s,n),o=!0},p(e,o){const d={};if(o&64&&(d.user=e[6]),!a&&o&1&&(a=!0,d.content=e[0],add_flush_callback(()=>a=!1)),!i&&o&2&&(i=!0,d.shadowContent=e[1],add_flush_callback(()=>i=!1)),o&256&&n!==(n=e[8].menu)){if(t){group_outros();const e=t;transition_out(e.$$.fragment,1,0,()=>{destroy_component(e,1)}),check_outros()}n?(t=construct_svelte_component(n,l(e)),binding_callbacks.push(()=>bind(t,"content",r)),binding_callbacks.push(()=>bind(t,"shadowContent",c)),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,s.parentNode,s)):t=null}else n&&t.$set(d)},i(e){if(o)return;t&&transition_in(t.$$.fragment,e),o=!0},o(e){t&&transition_out(t.$$.fragment,e),o=!1},d(e){e&&detach(s),t&&destroy_component(t,e)}}}function create_fragment(e){let a,l,y,o,g,i,v,O,s,c,h,w,r,_,t,b,f,m,j,u,p;l=new Head({props:{title:makeTitle(e[0].filename),env:e[5]}});let n=e[6]&&e[8].isAuthenticated&&create_if_block(e);function A(t){e[11](t)}let C={user:e[6]};e[7]!==void 0&&(C.hash=e[7]),i=new Login({props:C}),binding_callbacks.push(()=>bind(i,"hash",A)),h=new Header({}),r=new Nav({props:{user:e[6]}});const x=[e[0].fields,{allContent:e[3]},{allLayouts:e[4]},{content:e[0]},{env:e[5]}];function E(t){e[12](t)}var d=e[2];function k(e){let t={};for(let e=0;e<x.length;e+=1)t=assign(t,x[e]);return e[1]!==void 0&&(t.shadowContent=e[1]),{props:t}}return d&&(t=construct_svelte_component(d,k(e)),binding_callbacks.push(()=>bind(t,"shadowContent",E))),m=new Newsletter({}),u=new Footer({}),{c(){a=element("html"),create_component(l.$$.fragment),y=space(),o=element("body"),n&&n.c(),g=space(),create_component(i.$$.fragment),O=space(),s=element("main"),c=element("header"),create_component(h.$$.fragment),w=space(),create_component(r.$$.fragment),_=space(),t&&create_component(t.$$.fragment),f=space(),create_component(m.$$.fragment),j=space(),create_component(u.$$.fragment),this.h()},l(e){a=claim_element(e,"HTML",{lang:!0});var d,p,v,b=children(a);claim_component(l.$$.fragment,b),y=claim_space(b),o=claim_element(b,"BODY",{}),p=children(o),n&&n.l(p),g=claim_space(p),claim_component(i.$$.fragment,p),O=claim_space(p),s=claim_element(p,"MAIN",{class:!0}),d=children(s),c=claim_element(d,"HEADER",{class:!0}),v=children(c),claim_component(h.$$.fragment,v),w=claim_space(v),claim_component(r.$$.fragment,v),v.forEach(detach),_=claim_space(d),t&&claim_component(t.$$.fragment,d),f=claim_space(d),claim_component(m.$$.fragment,d),j=claim_space(d),claim_component(u.$$.fragment,d),d.forEach(detach),p.forEach(detach),b.forEach(detach),this.h()},h(){attr(c,"class","fixed-top header svelte-wgmnid"),attr(s,"class","svelte-wgmnid"),attr(a,"lang","en")},m(e,d){insert_hydration(e,a,d),mount_component(l,a,null),append_hydration(a,y),append_hydration(a,o),n&&n.m(o,null),append_hydration(o,g),mount_component(i,o,null),append_hydration(o,O),append_hydration(o,s),append_hydration(s,c),mount_component(h,c,null),append_hydration(c,w),mount_component(r,c,null),append_hydration(s,_),t&&mount_component(t,s,null),append_hydration(s,f),mount_component(m,s,null),append_hydration(s,j),mount_component(u,s,null),p=!0},p(e,[a]){const c={};a&1&&(c.title=makeTitle(e[0].filename)),a&32&&(c.env=e[5]),l.$set(c),e[6]&&e[8].isAuthenticated?n?(n.p(e,a),a&320&&transition_in(n,1)):(n=create_if_block(e),n.c(),transition_in(n,1),n.m(o,g)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros());const u={};a&64&&(u.user=e[6]),!v&&a&128&&(v=!0,u.hash=e[7],add_flush_callback(()=>v=!1)),i.$set(u);const h={};a&64&&(h.user=e[6]),r.$set(h);const m=a&57?get_spread_update(x,[a&1&&get_spread_object(e[0].fields),a&8&&{allContent:e[3]},a&16&&{allLayouts:e[4]},a&1&&{content:e[0]},a&32&&{env:e[5]}]):{};if(!b&&a&2&&(b=!0,m.shadowContent=e[1],add_flush_callback(()=>b=!1)),a&4&&d!==(d=e[2])){if(t){group_outros();const e=t;transition_out(e.$$.fragment,1,0,()=>{destroy_component(e,1)}),check_outros()}d?(t=construct_svelte_component(d,k(e)),binding_callbacks.push(()=>bind(t,"shadowContent",E)),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,s,f)):t=null}else d&&t.$set(m)},i(e){if(p)return;transition_in(l.$$.fragment,e),transition_in(n),transition_in(i.$$.fragment,e),transition_in(h.$$.fragment,e),transition_in(r.$$.fragment,e),t&&transition_in(t.$$.fragment,e),transition_in(m.$$.fragment,e),transition_in(u.$$.fragment,e),p=!0},o(e){transition_out(l.$$.fragment,e),transition_out(n),transition_out(i.$$.fragment,e),transition_out(h.$$.fragment,e),transition_out(r.$$.fragment,e),t&&transition_out(t.$$.fragment,e),transition_out(m.$$.fragment,e),transition_out(u.$$.fragment,e),p=!1},d(e){e&&detach(a),destroy_component(l),n&&n.d(),destroy_component(i),destroy_component(h),destroy_component(r),t&&destroy_component(t),destroy_component(m),destroy_component(u)}}}function instance(e,t,n){let c,r=noop,m=()=>(r(),r=subscribe(o,e=>n(8,c=e)),o);e.$$.on_destroy.push(()=>r());let{content:a,layout:h,allContent:u,allLayouts:l,env:d,user:o,shadowContent:s}=t;m();let i;onMount(async()=>{n(7,i=window.location.hash)});function f(e){a=e,n(0,a)}function p(e){s=e,n(1,s)}function g(e){i=e,n(7,i)}function v(e){s=e,n(1,s)}return e.$$set=e=>{"content"in e&&n(0,a=e.content),"layout"in e&&n(2,h=e.layout),"allContent"in e&&n(3,u=e.allContent),"allLayouts"in e&&n(4,l=e.allLayouts),"env"in e&&n(5,d=e.env),"user"in e&&m(n(6,o=e.user)),"shadowContent"in e&&n(1,s=e.shadowContent)},[a,s,h,u,l,d,o,i,c,f,p,g,v]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{content:0,layout:2,allContent:3,allLayouts:4,env:5,user:6,shadowContent:1})}}export default Component